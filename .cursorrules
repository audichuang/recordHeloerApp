# éŒ„éŸ³åˆ†æåŠ©æ‰‹ - å°ˆæ¡ˆè¦å‰‡

## å°ˆæ¡ˆæ¦‚è¿°
é€™æ˜¯ä¸€å€‹å®Œæ•´çš„éŒ„éŸ³åˆ†ææ‡‰ç”¨ç¨‹å¼ï¼ŒåŒ…å«iOSå‰ç«¯å’ŒFastAPIå¾Œç«¯ï¼Œä¸»è¦åŠŸèƒ½æ˜¯è®“ç”¨æˆ¶ä¸Šå‚³éŒ„éŸ³æ–‡ä»¶ï¼Œä¸¦æä¾›é€å­—ç¨¿è½‰æ›å’Œæ™ºèƒ½æ‘˜è¦æœå‹™ã€‚

## å°ˆæ¡ˆçµæ§‹

### å‰ç«¯ - iOS SwiftUI æ‡‰ç”¨ (recordHeloerApp/)
- **ä½ç½®**: `recordHeloerApp/RecordAnalyzer/`
- **æ¡†æ¶**: SwiftUI + Swift 6.0
- **ç›®æ¨™å¹³å°**: iOS 18.0+
- **Bundle ID**: com.recordanalyzer.app

#### ä¸»è¦åŠŸèƒ½æ¨¡çµ„ï¼š
1. **ç”¨æˆ¶èªè­‰ç³»çµ±**
   - è¨»å†Šæ–°ç”¨æˆ¶
   - ç”¨æˆ¶ç™»å…¥/ç™»å‡º
   - æ¸¬è©¦å¸³æˆ¶ï¼štest@example.com / password

2. **éŒ„éŸ³è™•ç†**
   - éŒ„éŸ³ä¸Šå‚³
   - èªéŸ³è½‰æ–‡å­—ï¼ˆé€å­—ç¨¿ï¼‰
   - AI æ‘˜è¦ç”Ÿæˆ
   - ä¸Šå‚³é€²åº¦é¡¯ç¤º

3. **æ­·å²ç´€éŒ„**
   - æŸ¥çœ‹éå¾€éŒ„éŸ³
   - ç€è¦½é€å­—ç¨¿å’Œæ‘˜è¦
   - éŒ„éŸ³ç®¡ç†åŠŸèƒ½

4. **ç”¨æˆ¶è³‡æ–™ç®¡ç†**
   - å€‹äººè³‡æ–™è¨­å®š
   - åå¥½è¨­å®š

#### æŠ€è¡“æ¶æ§‹ï¼š
- **ç‹€æ…‹ç®¡ç†**: @StateObject, @ObservableObject
- **æ•¸æ“šæŒä¹…åŒ–**: UserDefaults + Codable
- **ç¶²è·¯è«‹æ±‚**: æŒ‡å‘ `http://audimacbookpro:9527/api` (é€é Tailscale ç¶²çµ¡)
- **UIæ¡†æ¶**: SwiftUI with ä¸­æ–‡ä»‹é¢
- **æ¬Šé™**: éº¥å…‹é¢¨ä½¿ç”¨æ¬Šé™ã€èªéŸ³è­˜åˆ¥æ¬Šé™

### å¾Œç«¯ - FastAPI æ‡‰ç”¨ (recordhelper/)
- **ä½ç½®**: `recordhelper/`
- **æ¡†æ¶**: FastAPI + Python
- **ç‹€æ…‹**: å·²é–‹ç™¼å®Œæˆ
- **APIç«¯é»**: http://localhost:9527/api (æœ¬åœ°) æˆ– http://audimacbookpro:9527/api (Tailscale ç¶²çµ¡)

### ğŸŒ ç¶²çµ¡é…ç½®èªªæ˜
#### Tailscale é…ç½® (é‡è¦)
- **ä¸»æ©Ÿå**: `audimacbookpro`
- **å¾Œç«¯ç«¯å£**: `9527`
- **å®Œæ•´URL**: `http://audimacbookpro:9527/api`
- **ç”¨é€”**: é€é Tailscale ç¶²çµ¡è®“æ‰‹æ©Ÿå¯ä»¥é€£æ¥åˆ°é›»è…¦é€²è¡Œæ¸¬è©¦
- **æœ¬åœ°æ¸¬è©¦**: åœ¨é›»è…¦ä¸Šä½¿ç”¨ `http://localhost:9527/api`
- **æ‰‹æ©Ÿæ¸¬è©¦**: åœ¨æ‰‹æ©Ÿä¸Šä½¿ç”¨ `http://audimacbookpro:9527/api`

#### API åŸºç¤é…ç½®
- **é–‹ç™¼ç’°å¢ƒ**: `http://audimacbookpro:9527/api` (é€é Tailscale)
- **ç”Ÿç”¢ç’°å¢ƒ**: `https://api.recordhelper.com/api` (æœªä¾†éƒ¨ç½²)

#### ä¸»è¦APIç«¯é»ï¼š
1. **èªè­‰ API** (`/api/auth`)
   - POST `/api/auth/register` - ç”¨æˆ¶è¨»å†Š
   - POST `/api/auth/login` - ç”¨æˆ¶ç™»å…¥
   - POST `/api/auth/logout` - ç”¨æˆ¶ç™»å‡º
   - GET `/api/auth/me` - ç²å–ç•¶å‰ç”¨æˆ¶ä¿¡æ¯

2. **ç”¨æˆ¶ç®¡ç† API** (`/api/users`)
   - GET `/api/users/profile` - ç²å–ç”¨æˆ¶è³‡æ–™
   - PUT `/api/users/profile` - æ›´æ–°ç”¨æˆ¶è³‡æ–™
   - DELETE `/api/users/profile` - åˆªé™¤ç”¨æˆ¶å¸³è™Ÿ

3. **éŒ„éŸ³è™•ç† API** (`/api/recordings`)
   - POST `/api/recordings/upload` - ä¸Šå‚³éŒ„éŸ³æ–‡ä»¶
   - GET `/api/recordings` - ç²å–éŒ„éŸ³æ¸…å–®
   - GET `/api/recordings/summary` - ç²å–éŒ„éŸ³æ‘˜è¦åˆ—è¡¨ (è¼•é‡ç´š)
   - GET `/api/recordings/{id}` - ç²å–ç‰¹å®šéŒ„éŸ³è©³æƒ…
   - DELETE `/api/recordings/{id}` - åˆªé™¤éŒ„éŸ³
   - GET `/api/recordings/{id}/download` - ä¸‹è¼‰éŒ„éŸ³æ–‡ä»¶

4. **åˆ†ææœå‹™ API** (`/api/analysis`)
   - POST `/api/analysis/transcribe` - èªéŸ³è½‰æ–‡å­—
   - POST `/api/analysis/summarize` - ç”Ÿæˆæ‘˜è¦
   - GET `/api/analysis/status/{task_id}` - æŸ¥è©¢è™•ç†ç‹€æ…‹

5. **ç³»çµ±ç‹€æ…‹ API** (`/api/system`)
   - GET `/api/system/status` - ç³»çµ±å¥åº·ç‹€æ…‹
   - GET `/api/system/info` - ç³»çµ±ä¿¡æ¯

## é–‹ç™¼é‡é»

### ç•¶å‰ç‹€æ…‹ï¼š
- âœ… iOS å‰ç«¯åŸºæœ¬æ¶æ§‹å®Œæˆ
- âœ… SwiftUI ç•Œé¢è¨­è¨ˆå®Œæˆ
- âœ… å¾Œç«¯ FastAPI æœå‹™å®Œæˆ
- âœ… æ‡‰ç”¨å¯åœ¨æ¨¡æ“¬å™¨ä¸­æ­£å¸¸å•Ÿå‹•

### å¸¸è¦‹ä»»å‹™ï¼š
1. **å‰ç«¯é–‹ç™¼**ï¼š
   - ä½¿ç”¨ SwiftUI å’Œ Swift 6.0 èªæ³•
   - éµå¾ª MVVM æ¶æ§‹æ¨¡å¼
   - ä½¿ç”¨ @MainActor ç¢ºä¿ UI æ›´æ–°å®‰å…¨
   - æ¡ç”¨ ä¸­æ–‡ç¹é«” ä½œç‚ºç•Œé¢èªè¨€

2. **API æ•´åˆ**ï¼š
   - å‰ç«¯è«‹æ±‚æŒ‡å‘ `http://audimacbookpro:9527/api`
   - ä½¿ç”¨ async/await è™•ç†ç¶²è·¯è«‹æ±‚
   - å¯¦ä½œé©ç•¶çš„éŒ¯èª¤è™•ç†å’Œè¼‰å…¥ç‹€æ…‹

3. **æ•¸æ“šæ¨¡å‹**ï¼š
   - User: ç”¨æˆ¶è³‡è¨Šï¼ˆusername, email, createdAtï¼‰
   - Recording: éŒ„éŸ³è¨˜éŒ„ï¼ˆtitle, fileName, duration, transcription, summary, fileURLï¼‰
   - æ‰€æœ‰æ¨¡å‹éƒ½å¯¦ä½œ Codable å”è­°

4. **æ¬Šé™ç®¡ç†**ï¼š
   - NSMicrophoneUsageDescription: èªéŸ³éŒ„è£½åŠŸèƒ½
   - NSSpeechRecognitionUsageDescription: èªéŸ³è­˜åˆ¥åˆ†æ

## é–‹ç™¼æŒ‡å—

### iOS é–‹ç™¼ç´„å®šï¼š
- ä½¿ç”¨ Swift 6.0 æ–°ç‰¹æ€§ï¼ˆactor, @MainActorï¼‰
- æ¡ç”¨ SwiftUI è²æ˜å¼ UI
- æª”æ¡ˆå‘½åä½¿ç”¨ PascalCase
- è®Šæ•¸å‘½åä½¿ç”¨ camelCase
- ä¸­æ–‡è¨»è§£å’Œç”¨æˆ¶ç•Œé¢æ–‡å­—

### ç·¨ç¢¼é¢¨æ ¼ï¼š
- å„ªå…ˆä½¿ç”¨ async/await è€Œé completion handlers
- ä½¿ç”¨ @Published å±¬æ€§é€²è¡Œç‹€æ…‹ç®¡ç†
- é©ç•¶çš„éŒ¯èª¤è™•ç†å’Œç”¨æˆ¶åé¥‹
- éµå¾ª iOS Human Interface Guidelines

### æ¸¬è©¦å’Œéƒ¨ç½²ï¼š
- ç›®æ¨™æ¨¡æ“¬å™¨ï¼šiPhone 16 (iOS 18.4)
- é–‹ç™¼ç’°å¢ƒï¼šXcode 16.0+
- æ§‹å»ºå‘½ä»¤ï¼š`xcodebuild -project RecordAnalyzerApp.xcodeproj -scheme RecordAnalyzer`

## ğŸš€ **äº¤ä»˜è¦å‰‡ (é‡è¦)**

### **å¿…è¦äº¤ä»˜æ¢ä»¶ï¼š**
- âš ï¸ **æ‰€æœ‰ç¨‹å¼ç¢¼ä¿®æ”¹å®Œæˆå¾Œï¼Œå¿…é ˆç¢ºä¿å°ˆæ¡ˆå¯ä»¥æˆåŠŸ build**
- âš ï¸ **åªæœ‰åœ¨ build æ²’æœ‰å•é¡Œçš„æƒ…æ³ä¸‹ï¼Œæ‰å¯ä»¥äº¤ä»˜çµ¦ä½¿ç”¨è€…**
- âš ï¸ **äº¤ä»˜å‰å¿…é ˆåŸ·è¡Œå®Œæ•´çš„ç·¨è­¯æª¢æŸ¥**

### **Build æª¢æŸ¥æµç¨‹ï¼š**
1. **Xcode Build æª¢æŸ¥**ï¼š
   ```bash
   cd recordHeloerApp
   xcodebuild -project RecordAnalyzerApp.xcodeproj -scheme RecordAnalyzer -destination 'platform=iOS Simulator,name=iPhone 16' clean build
   ```

2. **ç·¨è­¯æˆåŠŸæ¨™æº–**ï¼š
   - âœ… ç„¡ç·¨è­¯éŒ¯èª¤ (Compile Errors)
   - âœ… ç„¡èªæ³•éŒ¯èª¤ (Syntax Errors)
   - âœ… ç„¡å‹åˆ¥éŒ¯èª¤ (Type Errors)
   - âš ï¸ è­¦å‘Š (Warnings) å¯æ¥å—ä½†éœ€è¦è¨˜éŒ„

3. **äº¤ä»˜å‰æª¢æŸ¥æ¸…å–®**ï¼š
   - [ ] ç¨‹å¼ç¢¼èªæ³•æ­£ç¢º
   - [ ] æ‰€æœ‰ import èªå¥æœ‰æ•ˆ
   - [ ] æ‰€æœ‰å‹åˆ¥å®šç¾©æ­£ç¢º
   - [ ] SwiftUI è¦–åœ–çµæ§‹å®Œæ•´
   - [ ] @Published å±¬æ€§æ­£ç¢ºä½¿ç”¨
   - [ ] async/await èªæ³•æ­£ç¢º
   - [ ] Build æˆåŠŸå®Œæˆ

### **éŒ¯èª¤è™•ç†åŸå‰‡ï¼š**
- å¦‚æœ build å¤±æ•—ï¼Œå¿…é ˆå…ˆä¿®å¾©æ‰€æœ‰ç·¨è­¯éŒ¯èª¤
- æä¾›ä¿®å¾©å»ºè­°å’Œå®Œæ•´çš„å¯ç·¨è­¯ç¨‹å¼ç¢¼
- é‡æ–°åŸ·è¡Œ build æª¢æŸ¥ç›´åˆ°æˆåŠŸ
- ç¢ºèªç„¡èª¤å¾Œæ‰æä¾›æœ€çµ‚ç‰ˆæœ¬çµ¦ä½¿ç”¨è€…

## å¿«é€Ÿå•Ÿå‹•æŒ‡å—

### å•Ÿå‹•å¾Œç«¯æœå‹™ï¼š
```bash
cd recordhelper
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
python run_fastapi.py
```
å¾Œç«¯æœå‹™å°‡åœ¨ http://localhost:9527 å•Ÿå‹• (Tailscale ç¶²çµ¡: http://audimacbookpro:9527)

### å•Ÿå‹•iOSå‰ç«¯ï¼š
```bash
cd recordHeloerApp
open -a Simulator
xcodebuild -project RecordAnalyzerApp.xcodeproj -scheme RecordAnalyzer -destination 'platform=iOS Simulator,id=FFFEB239-C2D3-40D4-A78A-AEF52AB0CEF0' build
xcrun simctl install booted /path/to/built/app
xcrun simctl launch booted com.recordanalyzer.app
```

### æˆ–è€…ä½¿ç”¨Xcodeï¼š
1. æ‰“é–‹ `recordHeloerApp/RecordAnalyzerApp.xcodeproj`
2. é¸æ“‡ iPhone æ¨¡æ“¬å™¨ä½œç‚ºç›®æ¨™
3. æŒ‰ Cmd+R é‹è¡Œ

## æ³¨æ„äº‹é …
- å‰ç«¯å·²æ•´åˆçœŸå¯¦ APIï¼Œé€šé Tailscale ç¶²çµ¡é€£æ¥å¾Œç«¯
- å¾Œç«¯é‹è¡Œåœ¨ç«¯å£ 9527ï¼Œå‰ç«¯ä½¿ç”¨ `http://audimacbookpro:9527/api`
- ç¢ºä¿åœ¨é–‹ç™¼æ™‚åŒæ™‚å•Ÿå‹•å¾Œç«¯æœå‹™å’Œ iOS æ¨¡æ“¬å™¨
- æ‰‹æ©Ÿæ¸¬è©¦éœ€è¦é€é Tailscale ç¶²çµ¡é€£æ¥
- æ‰€æœ‰ç”¨æˆ¶ç•Œé¢æ–‡å­—ä½¿ç”¨ç¹é«”ä¸­æ–‡
- APIæ–‡æª”å¯åœ¨ http://audimacbookpro:9527/docs æŸ¥çœ‹
- **ğŸ”¥ é‡è¦ï¼šä»»ä½•ç¨‹å¼ç¢¼äº¤ä»˜å‰éƒ½å¿…é ˆç¢ºä¿å¯ä»¥æˆåŠŸ build**